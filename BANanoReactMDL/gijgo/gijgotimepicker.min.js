gj.timepicker={plugins:{}},gj.timepicker.config={base:{width:void 0,modal:!0,header:!0,footer:!0,format:"HH:MM",uiLibrary:"materialdesign",value:void 0,mode:"ampm",locale:"en-us",size:"default",icons:{rightIcon:'<i class="gj-icon clock" />'},style:{modal:"gj-modal",wrapper:"gj-timepicker gj-timepicker-md gj-unselectable",input:"gj-textbox-md",clock:"gj-picker gj-picker-md timepicker",footer:"",button:"gj-button-md"}},bootstrap:{style:{wrapper:"gj-timepicker gj-timepicker-bootstrap gj-unselectable input-group",input:"form-control",clock:"gj-picker gj-picker-bootstrap timepicker",footer:"modal-footer",button:"btn btn-default"},iconsLibrary:"glyphicons"},bootstrap4:{style:{wrapper:"gj-timepicker gj-timepicker-bootstrap gj-unselectable input-group",input:"form-control border",clock:"gj-picker gj-picker-bootstrap timepicker",footer:"modal-footer",button:"btn btn-default"}}},gj.timepicker.methods={init:function(jsConfig){return gj.picker.widget.prototype.init.call(this,jsConfig,"timepicker"),this},initialize:function(){},initMouse:function($body,$input,$picker,data){$body.off(),$body.on("mousedown",gj.timepicker.methods.mouseDownHandler($input,$picker)),$body.on("mousemove",gj.timepicker.methods.mouseMoveHandler($input,$picker,data)),$body.on("mouseup",gj.timepicker.methods.mouseUpHandler($input,$picker,data))},createPicker:function($timepicker){var date,data=$timepicker.data(),$clock=$('<div role="picker" />').addClass(data.style.clock).attr("guid",$timepicker.attr("data-guid")),$hour=$('<div role="hour" />'),$minute=$('<div role="minute" />'),$header=$('<div role="header" />'),$mode=$('<div role="mode" />'),$body=$('<div role="body" />'),$btnOk=$('<button class="'+data.style.button+'">'+gj.core.messages[data.locale].ok+"</button>"),$btnCancel=$('<button class="'+data.style.button+'">'+gj.core.messages[data.locale].cancel+"</button>"),$footer=$('<div role="footer" class="'+data.style.footer+'" />');return!(date=gj.core.parseDate(data.value,data.format,data.locale))||isNaN(date.getTime())?date=new Date:$timepicker.attr("hours",date.getHours()),gj.timepicker.methods.initMouse($body,$timepicker,$clock,data),data.header&&($hour.on("click",function(){gj.timepicker.methods.renderHours($timepicker,$clock,data)}),$minute.on("click",function(){gj.timepicker.methods.renderMinutes($timepicker,$clock,data)}),$header.append($hour).append(":").append($minute),"ampm"===data.mode&&($mode.append($('<span role="am">'+gj.core.messages[data.locale].am+"</span>").on("click",function(){var hour=gj.timepicker.methods.getHour($clock);$clock.attr("mode","am"),$(this).addClass("selected"),$(this).parent().children('[role="pm"]').removeClass("selected"),hour>=12&&$clock.attr("hour",hour-12),data.modal||(clearTimeout($timepicker.timeout),$timepicker.focus())})),$mode.append("<br />"),$mode.append($('<span role="pm">'+gj.core.messages[data.locale].pm+"</span>").on("click",function(){var hour=gj.timepicker.methods.getHour($clock);$clock.attr("mode","pm"),$(this).addClass("selected"),$(this).parent().children('[role="am"]').removeClass("selected"),hour<12&&$clock.attr("hour",hour+12),data.modal||(clearTimeout($timepicker.timeout),$timepicker.focus())})),$header.append($mode)),$clock.append($header)),$clock.append($body),data.footer&&($btnCancel.on("click",function(){$timepicker.close()}),$footer.append($btnCancel),$btnOk.on("click",gj.timepicker.methods.setTime($timepicker,$clock)),$footer.append($btnOk),$clock.append($footer)),$clock.hide(),$("body").append($clock),data.modal&&($clock.wrapAll('<div role="modal" class="'+data.style.modal+'"/>'),gj.core.center($clock)),$clock},getHour:function($clock){return parseInt($clock.attr("hour"),10)||0},getMinute:function($clock){return parseInt($clock.attr("minute"),10)||0},setTime:function($timepicker,$clock){return function(){var hour=gj.timepicker.methods.getHour($clock),minute=gj.timepicker.methods.getMinute($clock),mode=$clock.attr("mode"),date=new Date(0,0,0,12===hour&&"am"===mode?0:hour,minute),data=$timepicker.data(),value=gj.core.formatDate(date,data.format,data.locale);$timepicker.value(value),$timepicker.close()}},getPointerValue:function(x,y,mode){var value,radius,size=256,angle=Math.atan2(128-x,128-y)/Math.PI*180;switch(angle<0&&(angle=360+angle),mode){case"ampm":return 0===(value=12-Math.round(12*angle/360))?12:value;case"24hr":return radius=Math.sqrt(Math.pow(128-x,2)+Math.pow(128-y,2)),0===(value=12-Math.round(12*angle/360))&&(value=12),radius<96&&(value=12===value?0:value+12),value;case"minutes":return 60===(value=Math.round(60-60*angle/360))?0:value}},updateArrow:function(e,$timepicker,$clock,data){var rect,value,mouseX=$timepicker.mouseX(e),mouseY=$timepicker.mouseY(e),scrollY=window.scrollY||window.pageYOffset||0,scrollX=window.scrollX||window.pageXOffset||0;rect=e.target.getBoundingClientRect(),"hours"==data.dialMode?(value=gj.timepicker.methods.getPointerValue(mouseX-scrollX-rect.left,mouseY-scrollY-rect.top,data.mode),$clock.attr("hour","ampm"===data.mode&&"pm"===$clock.attr("mode")&&value<12?value+12:value)):"minutes"==data.dialMode&&(value=gj.timepicker.methods.getPointerValue(mouseX-scrollX-rect.left,mouseY-scrollY-rect.top,"minutes"),$clock.attr("minute",value)),gj.timepicker.methods.update($timepicker,$clock,data)},update:function($timepicker,$clock,data){var hour,minute,$arrow,visualHour,$header,$numbers;hour=gj.timepicker.methods.getHour($clock),minute=gj.timepicker.methods.getMinute($clock),$arrow=$clock.find('[role="arrow"]'),"hours"==data.dialMode&&(0==hour||hour>12)&&"24hr"===data.mode?$arrow.css("width","calc(50% - 52px)"):$arrow.css("width","calc(50% - 20px)"),"hours"==data.dialMode?$arrow.css("transform","rotate("+(30*hour-90).toString()+"deg)"):$arrow.css("transform","rotate("+(6*minute-90).toString()+"deg)"),$arrow.show(),visualHour="ampm"===data.mode&&hour>12?hour-12:0==hour?12:hour,($numbers=$clock.find('[role="body"] span')).removeClass("selected"),$numbers.filter(function(e){return"hours"==data.dialMode?parseInt($(this).text(),10)==visualHour:parseInt($(this).text(),10)==minute}).addClass("selected"),data.header&&(($header=$clock.find('[role="header"]')).find('[role="hour"]').text(visualHour),$header.find('[role="minute"]').text(gj.core.pad(minute)),"ampm"===data.mode&&(hour>=12?($header.find('[role="pm"]').addClass("selected"),$header.find('[role="am"]').removeClass("selected")):($header.find('[role="am"]').addClass("selected"),$header.find('[role="pm"]').removeClass("selected"))))},mouseDownHandler:function($timepicker,$clock){return function(e){$timepicker.mouseMove=!0}},mouseMoveHandler:function($timepicker,$clock,data){return function(e){$timepicker.mouseMove&&gj.timepicker.methods.updateArrow(e,$timepicker,$clock,data)}},mouseUpHandler:function($timepicker,$clock,data){return function(e){gj.timepicker.methods.updateArrow(e,$timepicker,$clock,data),$timepicker.mouseMove=!1,data.modal||(clearTimeout($timepicker.timeout),$timepicker.focus()),"hours"==data.dialMode?setTimeout(function(){gj.timepicker.events.select($timepicker,"hour"),gj.timepicker.methods.renderMinutes($timepicker,$clock,data)},1e3):"minutes"==data.dialMode&&(!0!==data.footer&&!1!==data.autoClose&&gj.timepicker.methods.setTime($timepicker,$clock)(),gj.timepicker.events.select($timepicker,"minute"))}},renderHours:function($timepicker,$clock,data){var $dial,$body=$clock.find('[role="body"]');clearTimeout($timepicker.timeout),$body.empty(),($dial=$('<div role="dial"></div>')).append('<div role="arrow" style="transform: rotate(-90deg); display: none;"><div class="arrow-begin"></div><div class="arrow-end"></div></div>'),$dial.append('<span role="hour" style="transform: translate(54px, -93.5307px);">1</span>'),$dial.append('<span role="hour" style="transform: translate(93.5307px, -54px);">2</span>'),$dial.append('<span role="hour" style="transform: translate(108px, 0px);">3</span>'),$dial.append('<span role="hour" style="transform: translate(93.5307px, 54px);">4</span>'),$dial.append('<span role="hour" style="transform: translate(54px, 93.5307px);">5</span>'),$dial.append('<span role="hour" style="transform: translate(6.61309e-15px, 108px);">6</span>'),$dial.append('<span role="hour" style="transform: translate(-54px, 93.5307px);">7</span>'),$dial.append('<span role="hour" style="transform: translate(-93.5307px, 54px);">8</span>'),$dial.append('<span role="hour" style="transform: translate(-108px, 1.32262e-14px);">9</span>'),$dial.append('<span role="hour" style="transform: translate(-93.5307px, -54px);">10</span>'),$dial.append('<span role="hour" style="transform: translate(-54px, -93.5307px);">11</span>'),$dial.append('<span role="hour" style="transform: translate(-1.98393e-14px, -108px);">12</span>'),"24hr"===data.mode&&($dial.append('<span role="hour" style="transform: translate(38px, -65.8179px);">13</span>'),$dial.append('<span role="hour" style="transform: translate(65.8179px, -38px);">14</span>'),$dial.append('<span role="hour" style="transform: translate(76px, 0px);">15</span>'),$dial.append('<span role="hour" style="transform: translate(65.8179px, 38px);">16</span>'),$dial.append('<span role="hour" style="transform: translate(38px, 65.8179px);">17</span>'),$dial.append('<span role="hour" style="transform: translate(4.65366e-15px, 76px);">18</span>'),$dial.append('<span role="hour" style="transform: translate(-38px, 65.8179px);">19</span>'),$dial.append('<span role="hour" style="transform: translate(-65.8179px, 38px);">20</span>'),$dial.append('<span role="hour" style="transform: translate(-76px, 9.30732e-15px);">21</span>'),$dial.append('<span role="hour" style="transform: translate(-65.8179px, -38px);">22</span>'),$dial.append('<span role="hour" style="transform: translate(-38px, -65.8179px);">23</span>'),$dial.append('<span role="hour" style="transform: translate(-1.3961e-14px, -76px);">00</span>')),$body.append($dial),$clock.find('[role="header"] [role="hour"]').addClass("selected"),$clock.find('[role="header"] [role="minute"]').removeClass("selected"),data.dialMode="hours",gj.timepicker.methods.update($timepicker,$clock,data)},renderMinutes:function($timepicker,$clock,data){var $body=$clock.find('[role="body"]');clearTimeout($timepicker.timeout),$body.empty(),$dial=$('<div role="dial"></div>'),$dial.append('<div role="arrow" style="transform: rotate(-90deg); display: none;"><div class="arrow-begin"></div><div class="arrow-end"></div></div>'),$dial.append('<span role="hour" style="transform: translate(54px, -93.5307px);">5</span>'),$dial.append('<span role="hour" style="transform: translate(93.5307px, -54px);">10</span>'),$dial.append('<span role="hour" style="transform: translate(108px, 0px);">15</span>'),$dial.append('<span role="hour" style="transform: translate(93.5307px, 54px);">20</span>'),$dial.append('<span role="hour" style="transform: translate(54px, 93.5307px);">25</span>'),$dial.append('<span role="hour" style="transform: translate(6.61309e-15px, 108px);">30</span>'),$dial.append('<span role="hour" style="transform: translate(-54px, 93.5307px);">35</span>'),$dial.append('<span role="hour" style="transform: translate(-93.5307px, 54px);">40</span>'),$dial.append('<span role="hour" style="transform: translate(-108px, 1.32262e-14px);">45</span>'),$dial.append('<span role="hour" style="transform: translate(-93.5307px, -54px);">50</span>'),$dial.append('<span role="hour" style="transform: translate(-54px, -93.5307px);">55</span>'),$dial.append('<span role="hour" style="transform: translate(-1.98393e-14px, -108px);">00</span>'),$body.append($dial),$clock.find('[role="header"] [role="hour"]').removeClass("selected"),$clock.find('[role="header"] [role="minute"]').addClass("selected"),data.dialMode="minutes",gj.timepicker.methods.update($timepicker,$clock,data)},open:function($timepicker){var time,hour,data=$timepicker.data(),$clock=$("body").find('[role="picker"][guid="'+$timepicker.attr("data-guid")+'"]');return hour=(time=$timepicker.value()?gj.core.parseDate($timepicker.value(),data.format,data.locale):new Date).getHours(),"ampm"===data.mode&&$clock.attr("mode",hour>12?"pm":"am"),$clock.attr("hour",hour),$clock.attr("minute",time.getMinutes()),gj.timepicker.methods.renderHours($timepicker,$clock,data),gj.picker.widget.prototype.open.call($timepicker,"timepicker"),$timepicker},value:function($timepicker,value){var $clock,time,data=$timepicker.data();return void 0===value?$timepicker.val():($timepicker.val(value),gj.timepicker.events.change($timepicker),$timepicker)}},gj.timepicker.events={change:function($timepicker){return $timepicker.triggerHandler("change")},select:function($timepicker,type){return $timepicker.triggerHandler("select",[type])},open:function($timepicker){return $timepicker.triggerHandler("open")},close:function($timepicker){return $timepicker.triggerHandler("close")}},gj.timepicker.widget=function($element,jsConfig){var self=this,methods=gj.timepicker.methods;return this.mouseMove=!1,this.value=function(value){return methods.value(this,value)},this.destroy=function(){return gj.picker.widget.prototype.destroy.call(this,"timepicker")},this.open=function(){return gj.timepicker.methods.open(this)},this.close=function(){return gj.picker.widget.prototype.close.call(this,"timepicker")},$.extend($element,this),"true"!==$element.attr("data-timepicker")&&methods.init.call($element,jsConfig),$element},gj.timepicker.widget.prototype=new gj.picker.widget,gj.timepicker.widget.constructor=gj.timepicker.widget,function($){$.fn.timepicker=function(method){var $widget;if(this&&this.length){if("object"!=typeof method&&method){if(($widget=new gj.timepicker.widget(this,null))[method])return $widget[method].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+method+" does not exist."}return new gj.timepicker.widget(this,method)}}}(jQuery);